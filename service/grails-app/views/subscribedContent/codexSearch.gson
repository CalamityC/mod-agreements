import org.olf.kb.TitleInstance
import org.olf.kb.IdentifierOccurrence
import groovy.transform.*

model {
  Iterable<TitleInstance> results
  Integer totalRecords
}

def meta = ['totalRecords': (totalRecords) ]

json {
  instances (results) { TitleInstance ti ->
    id ti.id
    title ti.name
    // type ti.type?.value
    // format ti.subType?.value
    source 'ERM'
    rights ''
    version ''
    lastModified ''
    // identifier(ti.identifiers) { IdentifierOccurrence io ->
    //   value io.identifier.value
    //   type io.identifier.ns.value
    // }
  }
  resultInfo {
    'totalRecords' totalRecords
  }
}
