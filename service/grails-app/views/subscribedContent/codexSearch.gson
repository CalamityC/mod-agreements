import org.olf.kb.TitleInstance
import org.olf.kb.IdentifierOccurrence
import groovy.transform.*
import grails.orm.PagedResultList;


@Field
PagedResultList prl

json {
  instances (prl.iterator()) { TitleInstance ti ->
    id ti.id
    title ti.name
    // type ti.type?.value
    // format ti.subType?.value
    source 'ERM'
    rights ''
    version ''
    lastModified ''
    // identifier(ti.identifiers) { IdentifierOccurrence io ->
    //   value io.identifier.value
    //   type io.identifier.ns.value
    // }
  }
  resultInfo {
    'totalRecords' prl.getTotalCount()
  }
}
